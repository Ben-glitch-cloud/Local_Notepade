<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link href="/css/HomeNotes.css" rel="stylesheet" type="text/css"> 
    <title>Document</title>
</head>
<body>     
    <nav>  
        <h2>NoteBook</h2>
        <div class="navBar">
        <form action="/create_note" class="dropDownCon"> 
            <button id='createNoteNavButton' type="submit" class="creatNewNote"><svg xmlns="http://www.w3.org/2000/svg" width="3em" height="3em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 512 512"><path d="M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38ZM399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0Z"/><path d="M386.34 193.66L264.45 315.79A41.08 41.08 0 0 1 247.58 326l-25.9 8.67a35.92 35.92 0 0 1-44.33-44.33l8.67-25.9a41.08 41.08 0 0 1 10.19-16.87l122.13-121.91a8 8 0 0 0-5.65-13.66H104a56 56 0 0 0-56 56v240a56 56 0 0 0 56 56h240a56 56 0 0 0 56-56V199.31a8 8 0 0 0-13.66-5.65Z"/></svg></button> 
            <div class="dropDownCreateNote" id="createNoteNavMessageCon">
                <p id="createNoteNavMessage">Create a note</p>
            </div>
        </form>  
        <div class="dropDownCon">  
            <form action="/User_note">
                <button  type="submit" class="userInfo">
                    <svg xmlns="http://www.w3.org/2000/svg" width=3em" height="3em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 48 48"><mask id="svgIDa"><g  stroke-linejoin="round" stroke-width="4"><path fill="#fff" stroke="#fff" d="M18.284 43.171a19.995 19.995 0 0 1-8.696-5.304a6 6 0 0 0-5.182-9.838A20.09 20.09 0 0 1 4 24c0-2.09.32-4.106.916-6H5a6 6 0 0 0 5.385-8.65a19.968 19.968 0 0 1 8.267-4.627A6 6 0 0 0 24 8a6 6 0 0 0 5.348-3.277a19.968 19.968 0 0 1 8.267 4.627A6 6 0 0 0 43.084 18A19.99 19.99 0 0 1 44 24c0 1.38-.14 2.728-.406 4.03a6 6 0 0 0-5.182 9.838a19.995 19.995 0 0 1-8.696 5.303a6.003 6.003 0 0 0-11.432 0Z"/><path fill="#000" stroke="#000" d="M24 31a7 7 0 1 0 0-14a7 7 0 0 0 0 14Z"/></g></mask><path fill="currentColor" d="M0 0h48v48H0z" mask="url(#svgIDa)"/></svg>
                </button> 
                <div class="dropDownCreateNote">
                    <p>User Info</p>
                </div>
            </form>
        </div> 
        <div class="dropDownCon">  
            <form action="/about_note">
                <button  type="submit" class="userInfo">
                    <svg xmlns="http://www.w3.org/2000/svg" width="3em" height="3em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path fill="currentColor" d="M11 17h2v-6h-2Zm1-8q.425 0 .713-.288Q13 8.425 13 8t-.287-.713Q12.425 7 12 7t-.712.287Q11 7.575 11 8t.288.712Q11.575 9 12 9Zm0 13q-2.075 0-3.9-.788q-1.825-.787-3.175-2.137q-1.35-1.35-2.137-3.175Q2 14.075 2 12t.788-3.9q.787-1.825 2.137-3.175q1.35-1.35 3.175-2.138Q9.925 2 12 2t3.9.787q1.825.788 3.175 2.138q1.35 1.35 2.137 3.175Q22 9.925 22 12t-.788 3.9q-.787 1.825-2.137 3.175q-1.35 1.35-3.175 2.137Q14.075 22 12 22Z"/></svg>
                </button>  
                <div class="dropDownCreateNote">
                    <p>About</p>
                </div>
            </form>
        </div>   
        </div>
    </nav>   
    <i class="fa-sharp fa-solid fa-trash"></i>
    <div class="notesListArea">   
            <% if(NotesInfo.length !== 0) {%>
            <% NotesInfo.reverse().forEach((element, index) => { %>     
                <div class="note" id="singleNote<%= index %>">
                    <form action="/edit_note/<%= element.id %>/<%= element.Title %>/<%= element.Blog %>" method="get">
                        <button type="submit" value="Edit" class="ViewNote" id="editButton<%= index %>">
                            <div> 
                                <% if(element.Title.split('').length > 19) { %>
                                    <h3 id="noteHeader<%= index %>"><%= element.Title.split('').slice(0, 19).join('').trim() + '...' %></h3>
                                <% } else { %>  
                                    <h3 id="noteHeader<%= index %>"><%= element.Title.split('').slice(0, 19).join('').trim() %></h3>
                                <% } %>
                                  
                                <% if(element.Blog.split('').length > 19) { %> 
                                    <p id="noteText<%= index %>"><%= element.Blog.split('').slice(0, 30).join('') + '...' %></p>  
                                <% } else { %>  
                                    <p id="noteText<%= index %>"><%= element.Blog.split('').slice(0, 32).join('')%></p>  
                                <% } %>
                            </div>        
                        </button>  
                    </form>  
                    <div class="noteNav">
                        <form action="/delete_note/<%= element.id %>" method="get" class="deleteForm">
                            <button type="submit" class="deleteButton" id="deleteButton<%= index %>"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M7 21q-.825 0-1.412-.587Q5 19.825 5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413Q17.825 21 17 21ZM17 6H7v13h10ZM9 17h2V8H9Zm4 0h2V8h-2ZM7 6v13Z"/></svg></button> 
                        </form> 
                        <p class="reminder" id="editReminder<%= index %>">View Note</p>
                    </div>
                </div>
            <% }); %>  
            <% } else {%>  
                <div class="noteMessagePage">
                    <p>No Note's Here</p>
                </div>
            <% } %>
    </div>  
</body>  
<script> 

// colour data

let data = `<%- JSON.stringify(NotesInfo) %>`
let newData = JSON.parse(JSON.stringify(data))
let finishedData = JSON.parse(newData.slice(0, -7) + '"}]') 
let dataColour = <%- colourApply %>; 

// SingleNote.style.background = dataColour['Colour'] 

let getEditButton = [] 
let edit = []
let SingleNote = [] 
let SingleNoteHeader = [] 
let SingleNoteText = [] 
let SingledeleteButton = []

for(let i = 0; i < (finishedData.length); i++){ 

    getEditButton[i] = document.getElementById(`editButton${i}`)    
    SingleNote[i] = document.getElementById(`singleNote${i}`)
    edit[i] = document.getElementById(`editReminder${i}`)    
    SingleNoteHeader[i] = document.getElementById(`noteHeader${i}`)  
    SingleNoteText[i] = document.getElementById(`noteText${i}`)   
    SingledeleteButton[i] = document.getElementById(`deleteButton${i}`)


   SingleNote[i].style.background = dataColour['Colour']
   getEditButton[i].style.background = dataColour['Colour']
   edit[i].style.background = dataColour['Colour']
   SingleNoteHeader[i].style.background = dataColour['Colour']
   SingleNoteText[i].style.background = dataColour['Colour']
   SingledeleteButton[i].style.background = dataColour['Colour'] 

    getEditButton[i].addEventListener('mouseover', (event) => {
        edit[i].style.display = 'block' 
    })

    getEditButton[i].addEventListener('mouseout', (event) => {
        edit[i].style.display = 'none'
     }) 
}  

let CreateNoteNavButton = document.getElementById('createNoteNavButton')   
let CreateNoteNavMessageCon = document.getElementsByClassName("createNoteNavMessageCon") 
let CreateNoteNavMessage = document.getElementById('createNoteNavMessage')

if(finishedData.length >= 50){
    CreateNoteNavButton.setAttribute('disabled', '')  
    CreateNoteNavMessage.innerHTML = 'You have reached the max number of notes.'
    CreateNoteNavMessageCon.style.width = '180px'
}

</script>
    <script src="/HomeNotesWindow.js"></script> 
</html> 

